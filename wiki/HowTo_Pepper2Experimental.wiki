#summary How to experiment with the latest Pepper 2 API.
= This page is obsolete =
Please visit [http://code.google.com/chrome/nativeclient/ Native Client Documentation] for the latest information.

Warning:  Currently, the !NaCl bindings for pepper 2 are still under construction, and not everything will work yet.  Properties and methods are working, but anything requiring audio or graphics will not work.  

= Get the latest version of the SDK =

You will need to check out and build *both* the [http://code.google.com/p/nativeclient/wiki/Source NaCl repo] *and* this [HowTo_Checkout  SDK repo]. For Pepper 2 experimentation, you cannot use the published SDK, you must build the examples using the latest version of the toolchain in the repo.

Once you have the !NaCl repo checked out, follow these build steps:
{{{
cd ~/nacl/native_client
./scons --mode=opt-<platform>,nacl
}}}
For example, to build the optimized version of !NaCl the Mac:
{{{
cd ~/nacl/native_client
./scons --mode=opt-mac,nacl
}}}

= Set up your environment =

You have to set an environment variable in the shell where you run Chrome.

{{{
export NACL_SEL_LDR=/path/to/native_client/scons-out/<dbg|opt>-<platform>-x86-32/staging/sel_ldr
}}}
Optionally, on the Mac, you can manually copy `sel_ldr` to `ppNaClPlugin.bundle/Contents/Resources/` under the `scons-out` dir.

= Run Chrome with Pepper 2 enabled =

You will need a fairly recent [http://build.chromium.org/buildbot/snapshots/ trunk build of Chromium].  First, visit [http://chromium-status.appspot.com/lkgr the LKGR page]. Then, visit [http://build.chromium.org/buildbot/snapshots/], select your platform.  Use the LKGR version number to select a build.

See [http://dev.chromium.org/Home The Chromium Project] for more info.

=== Mac ===
{{{
Chromium.app/Contents/MacOS/Chromium \
    --no-sandbox\
    --register-pepper-plugins="/path/to/native_client/scons-out/opt-mac-x86-32/staging/ppNaClPlugin.bundle;application/x-nacl"\
    --user-data-dir=$HOME/nacl-profile
}}}
*Note:* You cannot use `$HOME` or `~` for the `--register-pepper-plugins` flag, you have to use a full path.

=== Linux ===
*Note:* It appears that only the 32-bit Chromium browser will work on Linux.  The 64-bit version tries to select a 32-bit .nexe which won't load.
{{{
/opt/google/chromium/chromium \
    --no-sandbox\
    --register-pepper-plugins="/path/to/native_client/scons-out/dbg-linux-x86-32/staging/libppNaClPlugin.so;application/x-nacl"\
    --user-data-dir=$HOME/nacl-profile
}}}

= Start up the local HTTP server =

{{{
cd examples
python httpd.py 5103
}}}

= Run an example =

Enter this into the Google Chrome address bar:
{{{
http://localhost:5103/hello_world/hello_world.html
}}}

= Debug environment variables =

{{{
export PPAPI_BROWSER_DEBUG=1  # Turn on useful PPAPI plugin debugging logs.
export NACL_PLUGIN_DEBUG=1  # Turn on useful NaCl SRPC debugging logs.
export NACL_PPAPI_PROXY_DEBUG=1  # Turn on PPAPI-specific logging.
}}}